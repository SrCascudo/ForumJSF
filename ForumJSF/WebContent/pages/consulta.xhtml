<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	template="/pages/template/layout.xhtml">
	
	<ui:define name="title">Consulta</ui:define>
	
	<ui:define name="content">
	<div class="container">
		<H1>Registro de Atividade</H1>
		<BR />
		<h:form>
			<div class="row">
				<div class="col">
					<h:inputText value="#{consultaController.buscarApartirData}"
						class="form-control">
						<f:convertDateTime type="localDate" pattern="dd/MM/yyyy" />
					</h:inputText>
				</div>
				<div class="col">
					<h:commandButton class="btn btn-secondary" value="BUSCAR"
						actionListener="#{consultaController.pesquisar}">

						<f:ajax execute="@form" render="busca" />
					</h:commandButton>
				</div>
			</div>
		</h:form>
		<BR /> <BR />

		<h:form class="table" id="busca">
			<h:dataTable class="thead-dark table-striped col"
				value="#{consultaController.publicacoes}" var="elemento">
				<h:column>
					<f:facet name="header">Tipo</f:facet>
					<h:outputLabel value="Publicação" />
				</h:column>
				<h:column>
					<f:facet name="header">Descricao</f:facet>
					<h:outputText value="Você publicou: #{elemento.descricao}" />
				</h:column>
				<h:column id="name">
					<f:facet name="header">Data</f:facet>
					<h:outputText value="#{elemento.quandoPublicado}">
						<f:convertDateTime type="localDate" pattern="dd/MM/yyyy" />
					</h:outputText>
				</h:column>
				<h:column>
					<h:commandLink
						actionListener="#{consultaController.edit(elemento)}"
						style="border: 0px; background-color: transparent;">
						<h:graphicImage width="15%" library="image" name="edit.png" />
					</h:commandLink>

					<h:commandLink
						actionListener="#{consultaController.delete(elemento)}" value=" "
						style="border: 0px; background-color: transparent;">
						<h:graphicImage width="15%" library="image" name="delete.png" />
						<f:ajax execute="@this" render="busca" />
					</h:commandLink>
				</h:column>
			</h:dataTable>
		</h:form>
	</div>
	</ui:define>
</ui:composition>